<script>

// Add user button
$(document).ready(function() {
	$("#Adduser_But").click(function() {
    	$("#AddUser_Box").show(400);
	}); 
});

// Cancel icon create user box
$(document).ready(function() {
	$("#cancel_Icon").click(function() {
		$("#AddUser_Box").hide(400);
    }); 
});
    
// Post create user data
$(document).ready(function() {
	$("#Submit_CreateUser").click(function() {
		var data = $('#CreateUserForm').serializeJSON();    
      
      	jQuery.ajax({
			url : "api/opr/addopr",
			data : data,
			contentType: "application/json",
			method: 'POST',
			success : function(data) {
          		console.log(data);
          	  	$('#CreateMSG').html(data);
           	 	loadUsers();
			},
			error: function(jqXHR, text, error) { 
            	console.log(data);
            	$('#CreateMSG').html(data).fadeToggle(500);
             	$("#AddUser_Box").show(400);
			}
		});  
	});   
});

// Refresh button
$(document).ready(function() {
	$("#refresh_But").click(function() {       
    	console.log('Refreshing users.');
    	loadUsers();
	});
});

//Create dummy user  
$(document).ready(function() {
	$("#Submit_CreateUser_dummy").click(function() {
		
		$('#oprId').val(Math.floor((Math.random() * 900) + 100));
        $('#oprFirstName').val('Dum');
        $('#oprLastName').val('Dummy');
        $('#oprIni').val('DD');
        $('#oprEmail').val('dum@dummy.com');
        $('#oprCpr').val('oprCpr');
        $('#oprPassword').val('pass');
        $('#oprRole1').val('None');
        
        var data = $('#CreateUserForm').serializeJSON();    
      
      	jQuery.ajax({
			url : "api/opr/addopr",
			data : data,
			contentType: "application/json",
			method: 'POST',
			success : function(data) {
            	console.log(data);
            	$('#CreateMSG').html(data);
           		loadUsers();
			},
			error: function(jqXHR, text, error){ 
           		console.log(data);
            	$('#CreateMSG').html(data).fadeToggle(500);
            	$("#AddUser_Box").show();
			}
		}); 
  	});   
});

//Delete users 
//$(document).ready(function(){
//   $('.del_User').click(function(){
//	   console.log('delete');  
//       
//        var id = $(this).prop('name');
//
//        console.log('delete' + id);  
//        
//     jQuery.ajax({
//	  url: "api/opr/deleteOpr",
//	  type: "POST",
//      data : id,
//	  contentType: "application/json",
//	  success: function(resultData) {
//         console.log(resultData);
//         $(this).css('color', 'gray'); 
//	  },
//	  error : function(jqXHR, textStatus, errorThrown) {
//          console.log(resultData);
//	  },
//	  timeout: 120000,
//	});
//    }); 
//});


</script>

<!--create user popup-->
<div id="AddUser_Box">
  <img id="cancel_Icon" src="assets/img/cancel_icon.png"> 
    <h1>Add User</h1>
  <form id="CreateUserForm" method="POST" action="api/opr/addopr">
  
    Id <br>
    <input type="text" name="oprId" id="oprId">
    <br>
  	First Name <br>
    <input type="text" name="oprFirstName" id="oprFirstName">	
    <br>
    Last Name <br>
    <input type="text" name="oprLastName" id="oprLastName">	
    <br>
    Initials <br>
    <input type="text" name="oprIni" id="oprIni">
    <br>
    E-mail <br>
    <input type="text" name="oprEmail" id="oprEmail">	
    <br>
    Cpr <br>
    <input type="text" name="oprCpr" id="oprCpr">
    <br>
    Password <br>
    <input type="text" name="oprPassword" id="oprPassword">
      <p id="CreateMSG"></p>
    <br>
    <br>
    
    Role 1:
    <select name="oprRole1" id="oprRole1">
      <option value="none">None</option>
      <option value="admin">Admin</option>
      <option value="farmaceut">Farmaceut</option>
      <option value="værkfører">Værkfører</option>
      <option value="laborant">Laborant</option>
    </select>
    
    Role 2:
    <select name="oprRole2">
 	  <option value="none">None</option>
      <option value="admin">Admin</option>
      <option value="farmaceut">Farmaceut</option>
      <option value="værkfører">Værkfører</option>
      <option value="laborant">Laborant</option>
    </select>
    
    Role 3:
    <select name="oprRole3">
      <option value="none">None</option>
      <option value="admin">Admin</option>
      <option value="farmaceut">Farmaceut</option>
      <option value="værkfører">Værkfører</option>
      <option value="laborant">Laborant</option>
    </select>
    
    Role 4:
    <select name="oprRole4">
	  <option value="none">None</option>
      <option value="admin">Admin</option>
      <option value="farmaceut">Farmaceut</option>
      <option value="værkfører">Værkfører</option>
      <option value="laborant">Laborant</option>
    </select>
     
  <br><br>
  <input id="Submit_CreateUser" type="button" value="Add user">
      <input id="Submit_CreateUser_dummy" type="button" value="Add dummy user">
    <p id="msg"></p>
</form> 
</div>
<!--create user popup slut-->

<button id="Adduser_But">Add User</button><button id="refresh_But">Refresh List</button>
<table id="table_con">
<tr>
  <td>Id</td>
  <td>First Name</td>
  <td>Last Name</td>
  <td>Initials</td>
  <td>E-mail</td>
  <td>Cpr</td>
  <td>Roles</td>
  <td>Delete</td>
  <td>Edit</td>
</tr>
</table>